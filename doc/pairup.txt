*pairup.txt*                             Inline AI pair programming for Neovim

==============================================================================
Table of Contents                                   *pairup-table-of-contents*

1. pairup.nvim                                            |pairup-pairup.nvim|
  - How It Works                             |pairup-pairup.nvim-how-it-works|
  - Neovim-Native Operator         |pairup-pairup.nvim-neovim-native-operator|
  - Signs                                           |pairup-pairup.nvim-signs|
  - Plan Marker (Review Before Apply)|pairup-pairup.nvim-plan-marker-(review-before-apply)|
  - Constitution Marker               |pairup-pairup.nvim-constitution-marker|
  - Questions                                   |pairup-pairup.nvim-questions|
  - Installation                             |pairup-pairup.nvim-installation|
  - Commands                                     |pairup-pairup.nvim-commands|
  - Status Indicator                     |pairup-pairup.nvim-status-indicator|
  - Configuration                           |pairup-pairup.nvim-configuration|
  - Requirements                             |pairup-pairup.nvim-requirements|
  - License                                       |pairup-pairup.nvim-license|

==============================================================================
1. pairup.nvim                                            *pairup-pairup.nvim*

Inline AI pair programming for Neovim.


  **Breaking Changes in v4.0**
  Thisversion removes the overlay system, sessions, RPC, and marker-based
  suggestions to focus on one thing: simple inline editing with `cc:`/`uu:`
  markers. See v4-architecture.md <./v4-architecture.md> for details.
  **Why?** Less complexity, more reliability. Claude edits files directly — no
  parsing, no overlays, no state management. Just write `cc:`, save, and Claude
  handles it.
  **Need the old features?** Use `git checkout legacy-v3` or `git checkout
  v3.0.0`.

HOW IT WORKS                                 *pairup-pairup.nvim-how-it-works*

Write `cc:` markers anywhere in your code, save, and Claude edits the file
directly.

>lua
    -- cc: add error handling here
    -- uu: Should I use pcall or assert?
    function process(data)
      return data.value
    end
<

Save → Claude reads the file → executes the instruction → removes the
marker.

See `prompt.md` <prompt.md> for the full prompt.


NEOVIM-NATIVE OPERATOR             *pairup-pairup.nvim-neovim-native-operator*

Use `gC` to insert cc: markers with proper comment syntax for any filetype:

  ---------------------------------------------------------------------------
  Keybinding         Action         Scope Hint         Captures Text
  ------------------ -------------- ------------------ ----------------------
  gCC                Insert cc:     <line>             No
                     marker above                      
                     current line                      

  gC!                Insert cc!:    <line>             No
                     constitution                      
                     marker                            

  gC?                Insert ccp:    <line>             No
                     plan marker                       

  gC? (visual)       Insert plan    <selection>        Yes
                     marker with                       
                     selection                         

  gCip/gCap          Insert marker  <paragraph>        No
                     for paragraph                     

  gCiw/gCaw          Insert marker  <word>             Yes
                     for word                          

  gCis/gCas          Insert marker  <sentence>         Yes
                     for sentence                      

  gCi}/gCa}          Insert marker  <block>            No
                     for block                         

  gCif/gCaf          Insert marker  <function>         No
                     for function                      

  gC (visual)        Insert marker  <selection>        Yes
                     with selected                     
                     text                              
  ---------------------------------------------------------------------------
**Scope hints** tell Claude what the instruction applies to:

>lua
    -- cc: <paragraph> refactor this section
    -- cc: <line> add error handling
    -- cc: <selection> some_variable <- rename to camelCase
<

**Example:** Select "controller configuration" and press `gC`:

>go
    // cc: <selection> controller configuration <-
    // Config holds the controller configuration
<


SIGNS                                               *pairup-pairup.nvim-signs*

Markers show in the gutter: - 󰭻 (yellow) — `cc:` command / `cc!:`
constitution / `ccp:` plan - 󰞋 (blue) — `uu:` question marker


PLAN MARKER (REVIEW BEFORE APPLY)*pairup-pairup.nvim-plan-marker-(review-before-apply)*

Use `ccp:` when you want to review Claude’s changes before applying them:

>lua
    -- ccp: add error handling
    function process(data)
      return data.value
    end
<

Claude wraps changes in conflict markers:

>lua
    <<<<<<< CURRENT
    function process(data)
      return data.value
    end
    =======
    function process(data)
      if not data then
        return nil, "missing data"
      end
      return data.value
    end
    >>>>>>> PROPOSED
<

**Accept/Reject:** Position cursor in the section you want to keep, then
`:Pairup accept` (or `<Plug>(pairup-accept)`): - Cursor in CURRENT → keep
original (reject proposal) - Cursor in PROPOSED → keep Claude’s change
(accept proposal)

**Mix and match:** Add `cc:` inside PROPOSED to refine before accepting:

>lua
    <<<<<<< CURRENT
    function process(data)
      return data.value
    end
    =======
    -- cc: also add logging
    function process(data)
      if not data then
        return nil, "missing data"
      end
      return data.value
    end
    >>>>>>> PROPOSED
<

Save → Claude refines the PROPOSED section → review again → accept when
satisfied.


CONSTITUTION MARKER                   *pairup-pairup.nvim-constitution-marker*

Use `cc!:` when you want Claude to both execute an instruction AND extract the
underlying rule into `CLAUDE.md`:

>lua
    -- cc!: use snake_case for all variable names
    local myVar = 1
<

Claude will rename `myVar` to `my_var` and add "use snake_case for variables"
to your project’s `CLAUDE.md`.


QUESTIONS                                       *pairup-pairup.nvim-questions*

When Claude needs more information, it adds `uu:` and you can continue
discussion by appending `cc:` in response.

>lua
    -- cc: add error handling here
    -- uu: Should I use pcall or assert?
    function process(data)
      return data.value
    end
<


INSTALLATION                                 *pairup-pairup.nvim-installation*

Key bindings are optional — the plugin works with `:Pairup` commands alone.

>lua
    -- lazy.nvim
    {
      "Piotr1215/pairup.nvim",
      cmd = { "Pairup" },
      keys = {
        { "<leader>cc", "<cmd>Pairup start<cr>", desc = "Start Claude" },
        { "<leader>ct", "<cmd>Pairup toggle<cr>", desc = "Toggle terminal" },
        { "<leader>cq", "<cmd>Pairup questions<cr>", desc = "Show questions" },
        { "<leader>cx", "<cmd>Pairup stop<cr>", desc = "Stop Claude" },
      },
      config = function()
        require("pairup").setup()
        -- Default works out of the box. Override only if needed:
        -- require("pairup").setup({
        --   providers = {
        --     claude = { cmd = "claude --permission-mode plan" },
        --   },
        -- })
      end,
    }
<


COMMANDS                                         *pairup-pairup.nvim-commands*

`:Pairup <subcommand>`

  Command     Description
  ----------- ---------------------------------------------
  start       Start Claude (hidden terminal)
  stop        Stop Claude
  toggle      Show/hide terminal
  say <msg>   Send message to Claude
  questions   Show uu: in quickfix
  inline      Manual cc: trigger
  diff        Send git diff to Claude
  lsp         Send LSP diagnostics to Claude
  suspend     Pause auto-processing (indicator turns red)
  accept      Accept conflict section at cursor

STATUS INDICATOR                         *pairup-pairup.nvim-status-indicator*

Automatically injected into lualine (or native statusline if no lualine). No
config needed.

- `[C]` — Claude running
- `[C:pending]` — Waiting for Claude
- `[C:██░░░░░░░░]` — Progress bar
- `[C:ready]` — Task complete

**Manual setup** (only if you disable auto-inject or use a custom statusline
plugin):

>lua
    -- Disable auto-inject
    require("pairup").setup({ statusline = { auto_inject = false } })
    
    -- Add to native statusline manually
    vim.o.statusline = '%f %m%=%{g:pairup_indicator} %l:%c'
<


CONFIGURATION                               *pairup-pairup.nvim-configuration*

**Default:** The `--permission-mode acceptEdits` flag is included by default.
This allows Claude to edit files without prompting for confirmation on each
change, which is required for the inline editing workflow to function smoothly.

All settings below are defaults. You only need to include values you want to
change:

>lua
    require("pairup").setup({
      provider = "claude",
      providers = {
        claude = {
          -- Full command with flags (default includes acceptEdits)
          cmd = "claude --permission-mode acceptEdits",
        },
      },
      terminal = {
        split_position = "left",
        split_width = 0.4,
        auto_insert = false, -- Enter insert mode when opening terminal
      },
      auto_refresh = {
        enabled = true,
        interval_ms = 500,
      },
      inline = {
        markers = {
          command = "cc:",
          question = "uu:",
          constitution = "cc!:",
          plan = "ccp:",
        },
        quickfix = true,
      },
      statusline = {
        auto_inject = true, -- auto-inject into lualine/native statusline
      },
      -- Progress bar (optional, disabled by default)
      -- NOTE: When enabled, YOU must grant Claude write access to the progress file directory.
      -- Add to your claude command: --add-dir /tmp (or your custom path)
      progress = {
        enabled = false,
        file = "/tmp/claude_progress", -- Default path, change if needed
      },
      flash = {
        scroll_to_changes = false, -- Auto-scroll to first changed line
      },
      operator = {
        key = "gC", -- change to override default
      },
    })
<


HIGHLIGHT GROUPS ~

Customizable highlight groups (respects light/dark background by default):

>lua
    -- In your colorscheme or after/plugin/colors.lua:
    vim.api.nvim_set_hl(0, 'PairupMarkerCC', { bg = '#your_color' }) -- cc: marker line
    vim.api.nvim_set_hl(0, 'PairupMarkerUU', { bg = '#your_color' }) -- uu: marker line
    vim.api.nvim_set_hl(0, 'PairupFlash', { bg = '#your_color' })    -- changed lines flash
<


PLUG MAPPINGS ~

Available `<Plug>` mappings for custom keybindings:

>lua
    vim.keymap.set('n', '<leader>cc', '<Plug>(pairup-toggle-session)')  -- start/stop
    vim.keymap.set('n', '<leader>ct', '<Plug>(pairup-toggle)')          -- show/hide terminal
    vim.keymap.set('n', '<leader>cs', '<Plug>(pairup-suspend)')         -- pause auto-processing
    vim.keymap.set('n', '<leader>cl', '<Plug>(pairup-lsp)')             -- send LSP diagnostics
    vim.keymap.set('n', '<leader>cd', '<Plug>(pairup-diff)')            -- send git diff
    vim.keymap.set('n', '<leader>cq', '<Plug>(pairup-questions)')       -- show uu: in quickfix
    vim.keymap.set('n', '<leader>ci', '<Plug>(pairup-inline)')          -- process cc: markers
    vim.keymap.set('n', ']C', '<Plug>(pairup-next-marker)')             -- next marker
    vim.keymap.set('n', '[C', '<Plug>(pairup-prev-marker)')             -- prev marker
    vim.keymap.set('n', '<leader>co', '<Plug>(pairup-accept)')          -- accept conflict at cursor
<


REQUIREMENTS                                 *pairup-pairup.nvim-requirements*

- Neovim 0.11+
- Claude Code CLI <https://docs.anthropic.com/en/docs/claude-code>


LICENSE                                           *pairup-pairup.nvim-license*

MIT

Generated by panvimdoc <https://github.com/kdheepak/panvimdoc>

vim:tw=78:ts=8:noet:ft=help:norl:
